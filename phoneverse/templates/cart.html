<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart | Phoneverse</title>
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
</head>

<body>
    <header class="hero">
        <div class="nav">
            <div class="brand">
                <img class="logo-img" src="{% static 'images/logo-phoneverse.svg' %}" alt="Phoneverse logo">
            </div>
            <div class="links">
                <a href="../">Home</a>
                <a href="../account/">Account</a>
            </div>
        </div>

        <div class="hero-grid">
            <div class="hero-copy">
                <div class="pill-ghost">Your cart</div>
                <h1>Review & checkout</h1>
                <p class="lede">Secure payments, fast dispatch, and transparent grading on every device.</p>
                <div class="hero-actions">
                    <a href="../" class="btn secondary">Continue shopping</a>
                </div>
                <div class="chips">
                    <span>{{ cart_items|length }} item{% if cart_items|length != 1 %}s{% endif %}</span>
                    <span>48h metro shipping</span>
                    <span>6-month protection</span>
                </div>
            </div>
            <div class="hero-showcase">
                <div class="hero-card glass">
                    <p class="eyebrow">Cart status</p>
                    <h3>Ready to place</h3>
                    <p class="muted">Need to remove something? Use the remove button on each item.</p>
                    <div class="stat-row">
                        <div><strong>{{ cart_items|length }}</strong><span>items</span></div>
                        <div><strong>42pt</strong><span>inspection</span></div>
                        <div><strong>48h</strong><span>dispatch</span></div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="section" id="cart">
        <div class="section-head">
            <div>
                <p class="eyebrow">Your selection</p>
                <h2>Cart items</h2>
                <p class="subhead">Confirm devices and quantities before checkout.</p>
            </div>
            <a href="../" class="btn ghost">Add more items</a>
        </div>

        <div class="product-grid">
            {% for item in cart_items %}
            <div class="card product">
                <div class="product-img">
                    {% if item.product.phone_image %}
                    <img src="{{ item.product.phone_image.url }}" alt="{{ item.product.name }}">
                    {% else %}
                    <img src="{% static 'media/default_pet.jpg' %}" alt="No Image">
                    {% endif %}
                    <div class="grade-pill">{{ item.product.category }}</div>
                </div>
                <div class="product-body">
                    <div>
                        <h3>{{ item.product.name }}</h3>
                        <p class="muted">{{ item.product.description }}</p>
                        <p class="muted">Quantity: {{ item.quantity }}</p>
                    </div>
                    <div class="product-footer">
                        <div class="price">₹{{ item.product.phone_price }}</div>
                        <form method="post" action="" style="margin:0;">
                            {% csrf_token %}
                            <input type="hidden" name="delete_id" value="{{ item.id }}">
                            <button type="submit" class="btn ghost">Remove</button>
                        </form>
                    </div>
                </div>
            </div>
            {% empty %}
            <p class="empty-state">No items in your cart. <a class="text-link" href="../">Browse phones →</a></p>
            {% endfor %}
        </div>


        <div class="total mt-4" style="margin-left:630px ;">
            <h3 style="margin-left:15px ;">Cart Summary</h3>
            <p class="fs-5">
                Total Amount:
                <strong>₹{{ total }}</strong>
            </p>

            <form method="post" action="{% url 'purchase' %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary w-10" style="margin-left:40px ;">
                    Purchase Now
                </button>
            </form>
        </div>

    </section>
</body>

</html>